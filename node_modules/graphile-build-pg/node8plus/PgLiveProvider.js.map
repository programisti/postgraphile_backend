{"version":3,"sources":["../src/PgLiveProvider.js"],"names":["PgLiveProvider","LiveProvider","constructor","args","namespace","collectionIdentifierIsValid","collectionIdentifier","kind","recordIdentifierIsValid","recordIdentifier","Array","isArray","primaryKeyConstraint","length","keyAttributes"],"mappings":";;;;;;AACA;;AAGe,MAAMA,cAAN,SAA6BC,2BAA7B,CAA0C;AACvD;AACAC,cAAY,GAAGC,IAAf,EAA4B;AAC1B,UAAM,GAAGA,IAAT;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACD;;AAEDC,8BAA4BC,oBAA5B,EAA2D;AACzD,WAAOA,wBAAwBA,qBAAqBC,IAArB,KAA8B,OAA7D;AACD;;AAEDC,0BACEF,oBADF;AAEE;AACAG,kBAHF,EAIE;AACA,QAAI,CAACC,MAAMC,OAAN,CAAcF,gBAAd,CAAL,EAAsC,OAAO,KAAP;AACtC,QAAI,CAACH,qBAAqBM,oBAA1B,EAAgD,OAAO,KAAP;AAChD,QACEH,iBAAiBI,MAAjB,KACAP,qBAAqBM,oBAArB,CAA0CE,aAA1C,CAAwDD,MAF1D,EAGE;AACA,aAAO,KAAP;AACD;AACD;AACA,WAAO,IAAP;AACD;AA1BsD;kBAApCb,c","file":"PgLiveProvider.js","sourcesContent":["// @flow\nimport { LiveProvider } from \"graphile-build\";\nimport type { PgClass } from \"./plugins/PgIntrospectionPlugin\";\n\nexport default class PgLiveProvider extends LiveProvider {\n  // eslint-disable-next-line flowtype/no-weak-types\n  constructor(...args: any[]) {\n    super(...args);\n    this.namespace = \"pg\";\n  }\n\n  collectionIdentifierIsValid(collectionIdentifier: PgClass) {\n    return collectionIdentifier && collectionIdentifier.kind === \"class\";\n  }\n\n  recordIdentifierIsValid(\n    collectionIdentifier: PgClass,\n    // eslint-disable-next-line flowtype/no-weak-types\n    recordIdentifier: Array<any>\n  ) {\n    if (!Array.isArray(recordIdentifier)) return false;\n    if (!collectionIdentifier.primaryKeyConstraint) return false;\n    if (\n      recordIdentifier.length !==\n      collectionIdentifier.primaryKeyConstraint.keyAttributes.length\n    ) {\n      return false;\n    }\n    // TODO: more validation would not go amiss\n    return true;\n  }\n}\n"]}