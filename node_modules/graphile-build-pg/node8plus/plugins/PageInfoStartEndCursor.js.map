{"version":3,"sources":["../../src/plugins/PageInfoStartEndCursor.js"],"names":["PageInfoStartEndCursor","builder","hook","fields","build","context","extend","getTypeByName","inflection","Self","fieldWithHooks","name","builtin","Cursor","startCursor","addDataGenerator","usesCursor","description","type","isPageInfoStartCursorField","endCursor"],"mappings":";;;;;;kBAGgB,SAASA,sBAAT,CAAgCC,OAAhC,EAAyC;AACvDA,UAAQC,IAAR,CACE,0BADF,EAEE,CAACC,MAAD,EAASC,KAAT,EAAgBC,OAAhB,KAA4B;AAC1B,UAAM,EAAEC,MAAF,EAAUC,aAAV,EAAyBC,UAAzB,KAAwCJ,KAA9C;AACA,UAAM,EAAEK,IAAF,EAAQC,cAAR,KAA2BL,OAAjC;AACA,QAAII,KAAKE,IAAL,KAAcH,WAAWI,OAAX,CAAmB,UAAnB,CAAlB,EAAkD;AAChD,aAAOT,MAAP;AACD;AACD,UAAMU,SAASN,cAAc,QAAd,CAAf;AACA,WAAOD,OACLH,MADK,EAEL;AACEW,mBAAaJ,eACX,aADW,EAEX,CAAC,EAAEK,gBAAF,EAAD,KAA0B;AACxBA,yBAAiB,OAAO,EAAEC,YAAY,CAAC,IAAD,CAAd,EAAP,CAAjB;AACA,eAAO;AACLC,uBACE,oDAFG;AAGLC,gBAAML;AAHD,SAAP;AAKD,OATU,EAUX;AACEM,oCAA4B;AAD9B,OAVW,CADf;AAeEC,iBAAWV,eACT,WADS,EAET,CAAC,EAAEK,gBAAF,EAAD,KAA0B;AACxBA,yBAAiB,OAAO,EAAEC,YAAY,CAAC,IAAD,CAAd,EAAP,CAAjB;AACA,eAAO;AACLC,uBACE,mDAFG;AAGLC,gBAAML;AAHD,SAAP;AAKD,OATQ,EAUT;AACEM,oCAA4B;AAD9B,OAVS;AAfb,KAFK,EAgCJ,mCAAkCV,KAAKE,IAAK,EAhCxC,CAAP;AAkCD,GA3CH,EA4CE,CAAC,wBAAD,CA5CF,EA6CE,EA7CF,EA8CE,CAAC,QAAD,CA9CF;AAgDD,C","file":"PageInfoStartEndCursor.js","sourcesContent":["// @flow\nimport type { Plugin } from \"graphile-build\";\n\nexport default (function PageInfoStartEndCursor(builder) {\n  builder.hook(\n    \"GraphQLObjectType:fields\",\n    (fields, build, context) => {\n      const { extend, getTypeByName, inflection } = build;\n      const { Self, fieldWithHooks } = context;\n      if (Self.name !== inflection.builtin(\"PageInfo\")) {\n        return fields;\n      }\n      const Cursor = getTypeByName(\"Cursor\");\n      return extend(\n        fields,\n        {\n          startCursor: fieldWithHooks(\n            \"startCursor\",\n            ({ addDataGenerator }) => {\n              addDataGenerator(() => ({ usesCursor: [true] }));\n              return {\n                description:\n                  \"When paginating backwards, the cursor to continue.\",\n                type: Cursor,\n              };\n            },\n            {\n              isPageInfoStartCursorField: true,\n            }\n          ),\n          endCursor: fieldWithHooks(\n            \"endCursor\",\n            ({ addDataGenerator }) => {\n              addDataGenerator(() => ({ usesCursor: [true] }));\n              return {\n                description:\n                  \"When paginating forwards, the cursor to continue.\",\n                type: Cursor,\n              };\n            },\n            {\n              isPageInfoStartCursorField: true,\n            }\n          ),\n        },\n        `Adding startCursor/endCursor to ${Self.name}`\n      );\n    },\n    [\"PageInfoStartEndCursor\"],\n    [],\n    [\"Cursor\"]\n  );\n}: Plugin);\n"]}