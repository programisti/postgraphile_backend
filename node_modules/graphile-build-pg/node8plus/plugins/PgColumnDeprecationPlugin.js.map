{"version":3,"sources":["../../src/plugins/PgColumnDeprecationPlugin.js"],"names":["PgColumnDeprecationPlugin","builder","hook","field","build","context","scope","pgFieldIntrospection","tags","deprecated","deprecationReason","Array","isArray","join"],"mappings":";;;;;;kBAGgB,SAASA,yBAAT,CAAmCC,OAAnC,EAA4C;AAC1DA,UAAQC,IAAR,CACE,gCADF,EAEE,CAACC,KAAD,EAAQC,KAAR,EAAeC,OAAf,KAA2B;AACzB,UAAM;AACJC,aAAO,EAAEC,oBAAF;AADH,QAEFF,OAFJ;AAGA,QACE,CAACE,oBAAD,IACA,CAACA,qBAAqBC,IADtB,IAEA,CAACD,qBAAqBC,IAArB,CAA0BC,UAH7B,EAIE;AACA,aAAON,KAAP;AACD;AACD,WAAO;AACL,SAAGA,KADE;AAELO,yBAAmBC,MAAMC,OAAN,CAAcL,qBAAqBC,IAArB,CAA0BC,UAAxC,IACfF,qBAAqBC,IAArB,CAA0BC,UAA1B,CAAqCI,IAArC,CAA0C,IAA1C,CADe,GAEfN,qBAAqBC,IAArB,CAA0BC;AAJzB,KAAP;AAMD,GAnBH,EAoBE,CAAC,qBAAD,CApBF;AAsBD,C","file":"PgColumnDeprecationPlugin.js","sourcesContent":["// @flow\nimport type { Plugin } from \"graphile-build\";\n\nexport default (function PgColumnDeprecationPlugin(builder) {\n  builder.hook(\n    \"GraphQLObjectType:fields:field\",\n    (field, build, context) => {\n      const {\n        scope: { pgFieldIntrospection },\n      } = context;\n      if (\n        !pgFieldIntrospection ||\n        !pgFieldIntrospection.tags ||\n        !pgFieldIntrospection.tags.deprecated\n      ) {\n        return field;\n      }\n      return {\n        ...field,\n        deprecationReason: Array.isArray(pgFieldIntrospection.tags.deprecated)\n          ? pgFieldIntrospection.tags.deprecated.join(\"\\n\")\n          : pgFieldIntrospection.tags.deprecated,\n      };\n    },\n    [\"PgColumnDeprecation\"]\n  );\n}: Plugin);\n"]}